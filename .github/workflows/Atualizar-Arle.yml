name: Galaxy M55 Kernel Release (Android 14)

on:
  workflow_dispatch:

jobs:
  release:
    runs-on: ubuntu-latest

    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Create or update tag
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "github-actions@github.com"
          git tag -f v1.0-android14-kernelsu-next
          git push -f origin v1.0-android14-kernelsu-next

      - name: Download boot image from MediaFire
        run: |
          mkdir -p artifacts
          curl -L \
            "https://www.mediafire.com/file/t0hxq5m253ap842/boot-m55-android14-kernelsu-next-v3.img/file?dkey=fvvtw5b2rrk&r=1712&download=1" \
            -o artifacts/boot-m55-android14-kernelsu-next-v3.img

      - name: Verify downloaded file
        run: |
          echo "Arquivo baixado:"
          ls -lh artifacts
          echo "Tipo do arquivo:"
          file artifacts/boot-m55-android14-kernelsu-next-v3.img

      - name: Create or update GitHub Release and upload asset
        uses: softprops/action-gh-release@v2
        with:
          tag_name: v1.0-android14-kernelsu-next
          name: Galaxy M55 ‚Ä¢ Android 14 ‚Ä¢ KernelSU Next v3
          body: |
            # Samsung Galaxy M55 Kernel (SM-M556B)

            **Android:** 14 (One UI 6.1)  
            **Root:** KernelSU Next v3  
            **Base:** Samsung Stock Kernel  

            ---

            ## üì¶ Download

            O arquivo abaixo est√° dispon√≠vel diretamente nos **Assets deste Release**.

            ---

            ## üîê Root

            Root em n√≠vel de kernel via **KernelSU Next v3**, integrado diretamente
            ao kernel, sem uso de Magisk no boot.

            ---

            ## üôè Agradecimentos

            Este projeto √© resultado do trabalho coletivo da comunidade open source
            e de desenvolvedores que elevaram o n√≠vel do root e do desenvolvimento
            de kernels no Android.

            ### üåü Agradecimento especial

            **Tiann**  
            Criador e mantenedor do **KernelSU**.  
            Toda a arquitetura de root em n√≠vel de kernel, conceitos de seguran√ßa
            e a base t√©cnica utilizada neste projeto existem gra√ßas ao seu trabalho.  
            https://github.com/tiann  

            ### üß© Projetos fundamentais

            - **KernelSU**  
              https://github.com/tiann/KernelSU  

            - **KernelSU Next**  
              https://github.com/KernelSU-Next  

            ### ü§ù Colabora√ß√µes e contribui√ß√µes

            - **Fernanda**  
              Contribui√ß√µes t√©cnicas, testes e apoio no ecossistema de kernels Samsung.  
              GitHub: https://github.com/DevzPlayer  

            - **rifsxd**  
              Refer√™ncias t√©cnicas e contribui√ß√µes relevantes para o desenvolvimento
              de kernel Android.  
              https://github.com/rifsxd  

            ---

            ## ‚ö†Ô∏è Aviso

            Este kernel √© destinado a **usu√°rios avan√ßados**.  
            Flash incorreto pode causar **bootloop ou soft-brick**.

            Use por sua conta e risco.
          files: |
            artifacts/boot-m55-android14-kernelsu-next-v3.img
          draft: false
          prerelease: false
